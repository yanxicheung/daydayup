多生产者单消费者问题

万一程序崩溃，最后若干条日志丢失如何处理？

1. 定期flush到磁盘
2. 每条日志带有cookies(???)